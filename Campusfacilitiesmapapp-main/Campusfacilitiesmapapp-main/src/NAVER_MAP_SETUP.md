# 네이버 지도 API 연동 가이드

## 개요
Campus Compass 앱에서 네이버 지도 API를 사용하여 실제 지도를 표시하고 백석대학교 편의시설 마커를 표시합니다.

## 1. 네이버 클라우드 플랫폼 설정

### 1.1 네이버 클라우드 플랫폼 가입
1. [네이버 클라우드 플랫폼](https://www.ncloud.com/)에 접속합니다.
2. 회원가입 또는 로그인합니다.

### 1.2 Maps API 신청
1. 콘솔에서 **AI·NAVER API** → **AI·NAVER API** 메뉴로 이동합니다.
2. **Maps** 서비스를 선택합니다.
3. **애플리케이션 등록**을 클릭합니다.
4. 애플리케이션 이름을 입력합니다 (예: "Campus Compass").
5. **Web Dynamic Map** 서비스를 선택합니다.
6. 서비스 URL을 등록합니다:
   - 개발 환경: `http://localhost:5173` (또는 개발 서버 포트)
   - 운영 환경: 실제 배포 도메인 (예: `https://campuscompass.com`)

### 1.3 클라이언트 ID 확인
애플리케이션 등록이 완료되면 **Client ID**가 발급됩니다. 이 ID를 복사해둡니다.

## 2. 코드에 API 키 적용

### 2.1 MapView.tsx 파일 수정
`/components/MapView.tsx` 파일의 33번째 라인을 찾아 본인의 클라이언트 ID로 교체합니다:

```typescript
// 수정 전
script.src = 'https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=YOUR_CLIENT_ID_HERE';

// 수정 후 (예시)
script.src = 'https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=abc123def456';
```

**⚠️ 중요**: `YOUR_CLIENT_ID_HERE`를 본인의 실제 클라이언트 ID로 교체해야 합니다.

## 3. 기능 설명

### 3.1 지도 초기화
- 앱이 로드되면 자동으로 네이버 지도 API 스크립트를 불러옵니다.
- 백석대학교 중심 좌표 (36.7675, 127.0745)로 지도가 초기화됩니다.
- 초기 줌 레벨은 16으로 설정되어 있습니다.

### 3.2 시설 마커 표시
- 각 편의시설의 위도/경도 좌표를 사용하여 마커를 표시합니다.
- 마커는 백석대학교 공식 컬러 (#005BAC)로 표시됩니다.
- 마커를 클릭하면 해당 시설의 상세 정보가 표시됩니다.
- 카테고리 필터링 시 해당 카테고리의 마커만 표시됩니다.

### 3.3 현재 위치 기능
- 우측 하단의 현재 위치 버튼을 클릭하면:
  - 사용자의 현재 위치로 지도가 이동합니다.
  - 위치 권한이 없으면 백석대학교 중심으로 이동합니다.

### 3.4 길찾기 기능
- 시설 상세 정보에서 "길찾기" 버튼을 클릭하면:
  - 모바일: 네이버 지도 앱으로 연결을 시도하고, 앱이 없으면 웹으로 연결됩니다.
  - 데스크톱: 네이버 지도 웹사이트로 연결됩니다.

## 4. 즐겨찾기 기능

### 4.1 저장 방식
- 즐겨찾기는 브라우저의 localStorage에 저장됩니다.
- 저장 키: `cc_favorites`
- 형식: 즐겨찾기한 시설 ID 배열 (예: `[1, 5, 10]`)

### 4.2 사용 방법
1. 시설 상세 정보 화면에서 하트 아이콘을 클릭합니다.
2. 즐겨찾기에 추가/제거됩니다.
3. 하단 내비게이션의 "즐겨찾기" 탭에서 즐겨찾기한 시설을 확인할 수 있습니다.

### 4.3 데이터 지속성
- 브라우저를 닫아도 즐겨찾기 데이터가 유지됩니다.
- 브라우저 캐시를 지우면 즐겨찾기 데이터가 삭제됩니다.

## 5. 문제 해결

### 5.1 지도가 표시되지 않는 경우
1. 브라우저 개발자 도구 콘솔을 확인합니다.
2. 클라이언트 ID가 올바르게 입력되었는지 확인합니다.
3. 네이버 클라우드 플랫폼에서 서비스 URL이 올바르게 등록되었는지 확인합니다.
4. 브라우저에서 JavaScript가 활성화되어 있는지 확인합니다.

### 5.2 마커가 표시되지 않는 경우
1. 시설 데이터의 위도/경도 좌표가 올바른지 확인합니다.
2. 카테고리 필터가 "전체"로 설정되어 있는지 확인합니다.

### 5.3 즐겨찾기가 저장되지 않는 경우
1. 브라우저의 쿠키 및 localStorage 설정을 확인합니다.
2. 시크릿 모드에서는 localStorage가 제한될 수 있습니다.

## 6. API 사용량 및 비용

- 네이버 지도 API는 무료 사용량이 제공됩니다.
- 자세한 사용량 및 요금은 [네이버 클라우드 플랫폼 요금표](https://www.ncloud.com/product/applicationService/maps)를 확인하세요.

## 7. 추가 개발 참고사항

### 7.1 지도 옵션 커스터마이징
`MapView.tsx`의 `mapOptions` 객체를 수정하여 지도 초기 설정을 변경할 수 있습니다:

```typescript
const mapOptions = {
  center: new window.naver.maps.LatLng(36.7675, 127.0745),
  zoom: 16,                    // 줌 레벨 조정
  zoomControl: true,           // 줌 컨트롤 표시 여부
  mapTypeControl: false,       // 지도 타입 컨트롤 표시 여부
  scaleControl: true,          // 축척 컨트롤 추가
  logoControl: true,           // 네이버 로고 표시 여부
  mapDataControl: true,        // 지도 데이터 저작권 컨트롤
};
```

### 7.2 마커 커스터마이징
마커의 디자인, 크기, 색상 등을 변경하려면 `MapView.tsx`의 마커 생성 부분을 수정합니다.

### 7.3 네이버 지도 API 문서
- [공식 문서](https://navermaps.github.io/maps.js.ncp/)
- [API 레퍼런스](https://navermaps.github.io/maps.js.ncp/docs/)

## 8. 보안 권장사항

⚠️ **중요**: 
- 클라이언트 ID는 공개되어도 되는 정보이지만, 서비스 URL 제한을 통해 무단 사용을 방지해야 합니다.
- 네이버 클라우드 플랫폼 콘솔에서 허용된 도메인만 등록하세요.
- API 사용량을 정기적으로 모니터링하세요.

---

문의사항이나 문제가 발생하면 [네이버 클라우드 플랫폼 고객센터](https://www.ncloud.com/support/question)로 연락하세요.
